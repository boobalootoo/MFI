<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Trolley Welcome Animation</title>
  <style>
  .typed-message {
    position: absolute;
    top: 20px;
    left: 20px;
    right: 20px;
    color: green;
    font-family: monospace;
    font-size: 18px;
    white-space: pre-wrap;
    max-width: 90%;
}

    body {
      background-color: black;
      margin: 0;
      font-family: monospace;
      color: green;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      position: relative;
      overflow: hidden;
    }

    .container {
      position: absolute;
      display: flex;
      align-items: flex-end;
      bottom: 40px;
      left: 0;
    }

    .trolley-stack {
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      z-index: 1;
      transform-origin: 50% 0%;
      transition: transform 2s ease-in-out;
    }

    .row {
      display: flex;
      justify-content: center;
      margin-bottom: -5px;
    }

    .box {
      width: 50px;
      height: 50px;
      background-color: green;
      color: black;
      border: 1px solid black;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      margin: 0 2px;
      position: relative;
      overflow: visible;
    }

    .box .label {
      color: black;
      font-size: 14px;
    }

    .trolley {
      width: 250px;
      height: 50px;
      background-color: green;
      border: 2px solid black;
      position: relative;
      bottom: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 0;
      z-index: 0;
      transition: transform 2s ease-in-out;
    }

    .trolley-text {
      position: absolute;
      top: 5px;
      color: black;
      font-size: 16px;
      font-weight: bold;
    }

    .wheel {
      width: 25px;
      height: 25px;
      background-color: green;
      border: 2px solid black;
      border-radius: 50%;
      position: absolute;
      bottom: -15px;
    }

    .wheel.left {
      left: 30px;
    }

    .wheel.right {
      right: 30px;
    }

    .welcome-sign {
      position: absolute;
      top: 20%;
      left: 50%;
      transform: translateX(-50%);
      background-color: green;
      border: 2px solid black;
      color: black;
      padding: 10px 20px;
      font-size: 18px;
      font-weight: bold;
      z-index: 2;
      white-space: nowrap;
    }

    .binary {
      position: absolute;
      color: lime;
      font-size: 16px;
      pointer-events: none;
      z-index: 0;
      animation: fall 3s linear forwards;
    }

    @keyframes fall {
      0% { transform: translateY(0); opacity: 1; }
      100% { transform: translateY(100vh); opacity: 1; }
    }

    .binary-pile {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      padding: 10px;
      display: flex;
      flex-wrap: wrap;
      align-items: flex-end;
      z-index: 0;
    }

    .binary-pile .bit {
      color: lime;
      font-size: 16px;
      line-height: 1;
      margin: 1px;
    }
  </style>
  <script>
    const message = "The request has been received at the correct IP address, now it needs to be reassembled so they know what we want. All of your packets are here and they have them in the right order, so they can understand our request and show us the page.";

    let i = 0;
function typeEffect() {
    if (i < message.length) {
        document.getElementById("typedMessage").textContent += message.charAt(i);
        i++;
        setTimeout(typeEffect, 30); // adjust speed here
    } else {
        // After typing is finished, wait 2 seconds then redirect
        setTimeout(() => {
            window.location.href = 'server.html';
        }, 2000);
    }
}

    window.onload = function () {
        // Type effect
        typeEffect();

        // Trolley animation logic
        const trolley = document.querySelector('.trolley');
        const trolleyStack = document.querySelector('.trolley-stack');
        const boxes = document.querySelectorAll('.box');

        const binaryPile = document.createElement('div');
        binaryPile.classList.add('binary-pile');
        document.body.appendChild(binaryPile);

        const distanceToMove = window.innerWidth;
        trolley.style.transform = `translateX(${distanceToMove}px)`;

        setTimeout(() => {
            trolleyStack.style.transform = 'rotate(180deg)';

            setTimeout(() => {
                boxes.forEach(box => startBinaryRain(box));
            }, 2000);
        }, 1000);

        function startBinaryRain(box) {
            const boxRect = box.getBoundingClientRect();
            const interval = setInterval(() => {
                const binary = document.createElement('div');
                binary.classList.add('binary');
                binary.innerText = Math.random() < 0.5 ? '0' : '1';
                binary.style.left = (boxRect.left + boxRect.width / 2) + 'px';
                binary.style.top = (boxRect.top + window.scrollY) + 'px';
                document.body.appendChild(binary);

                // 50% of the time, binary stays at bottom
                if (Math.random() < 0.5) {
                    setTimeout(() => {
                        const pileBit = document.createElement('div');
                        pileBit.classList.add('bit');
                        pileBit.innerText = binary.innerText;
                        binaryPile.appendChild(pileBit);
                        binary.remove();
                    }, 3000);
                } else {
                    setTimeout(() => binary.remove(), 4000);
                }
            }, 100);
        }
    };
  </script>
</head>
<body>
    <div class="typed-message" id="typedMessage"></div>
  <div class="container">
    <div class="trolley-stack">
      <div class="row">
        <div class="box"><div class="label">Packet 1</div></div>
      </div>
      <div class="row">
        <div class="box"><div class="label">Packet 2</div></div>
        <div class="box"><div class="label">Packet 3</div></div>
      </div>
      <div class="row">
        <div class="box"><div class="label">Packet 4</div></div>
        <div class="box"><div class="label">Packet 5</div></div>
        <div class="box"><div class="label">Packet 6</div></div>
      </div>
      <div class="row">
        <div class="box"><div class="label">Packet 7</div></div>
        <div class="box"><div class="label">Packet 8</div></div>
        <div class="box"><div class="label">Packet 9</div></div>
        <div class="box"><div class="label">Packet 10</div></div>
      </div>
      <div class="trolley">
        <div class="trolley-text">Request for 192.0.2.1</div>
        <div class="wheel left"></div>
        <div class="wheel right"></div>
      </div>
    </div>
  </div>

  <div class="welcome-sign">Welcome to: 192.0.2.1</div>
</body>
</html>
